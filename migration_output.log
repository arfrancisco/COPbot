rake aborted!
StandardError: An error has occurred, this and all later migrations canceled: (StandardError)

undefined method 'vector' for an instance of ActiveRecord::ConnectionAdapters::PostgreSQL::TableDefinition
/home/alain/COPbot/db/migrate/20241205000002_create_messages.rb:7:in 'block in CreateMessages#change'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:557:in 'block in ActiveRecord::Migration::Current#create_table'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/schema_statements.rb:318:in 'ActiveRecord::ConnectionAdapters::SchemaStatements#create_table'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:966:in 'block in ActiveRecord::Migration#method_missing'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:936:in 'block in ActiveRecord::Migration#say_with_time'
/home/alain/.rvm/gems/ruby-3.4.5/gems/benchmark-0.5.0/lib/benchmark.rb:305:in 'Benchmark.measure'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:936:in 'ActiveRecord::Migration#say_with_time'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:955:in 'ActiveRecord::Migration#method_missing'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:557:in 'ActiveRecord::Migration::Current#create_table'
/home/alain/COPbot/db/migrate/20241205000002_create_messages.rb:3:in 'CreateMessages#change'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:906:in 'ActiveRecord::Migration#exec_migration'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:890:in 'block (2 levels) in ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/benchmark-0.5.0/lib/benchmark.rb:305:in 'Benchmark.measure'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:889:in 'block in ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:215:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:888:in 'ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1096:in 'ActiveRecord::MigrationProxy#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1410:in 'block in ActiveRecord::Migrator#execute_migration_in_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/transaction.rb:319:in 'block in ActiveRecord::ConnectionAdapters::TransactionManager#within_new_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in 'Thread.handle_interrupt'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in 'block in ActiveSupport::Concurrency::LoadInterlockAwareMonitor#synchronize'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in 'Thread.handle_interrupt'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in 'ActiveSupport::Concurrency::LoadInterlockAwareMonitor#synchronize'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/transaction.rb:317:in 'ActiveRecord::ConnectionAdapters::TransactionManager#within_new_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/database_statements.rb:316:in 'ActiveRecord::ConnectionAdapters::DatabaseStatements#transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/transactions.rb:209:in 'ActiveRecord::Transactions::ClassMethods#transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1461:in 'ActiveRecord::Migrator#ddl_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1409:in 'ActiveRecord::Migrator#execute_migration_in_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1383:in 'Array#each'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1383:in 'ActiveRecord::Migrator#migrate_without_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1332:in 'block in ActiveRecord::Migrator#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1482:in 'block in ActiveRecord::Migrator#with_advisory_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:215:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1497:in 'ActiveRecord::Migrator#with_advisory_lock_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1478:in 'ActiveRecord::Migrator#with_advisory_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1332:in 'ActiveRecord::Migrator#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1167:in 'ActiveRecord::MigrationContext#up'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1142:in 'ActiveRecord::MigrationContext#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/tasks/database_tasks.rb:262:in 'ActiveRecord::Tasks::DatabaseTasks#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/railties/databases.rake:92:in 'block (2 levels) in <main>'
/home/alain/.rvm/gems/ruby-3.4.5/gems/rake-13.3.1/exe/rake:27:in '<top (required)>'
/home/alain/.rvm/gems/ruby-3.4.5/bin/ruby_executable_hooks:22:in 'Kernel#eval'
/home/alain/.rvm/gems/ruby-3.4.5/bin/ruby_executable_hooks:22:in '<main>'

Caused by:
NoMethodError: undefined method 'vector' for an instance of ActiveRecord::ConnectionAdapters::PostgreSQL::TableDefinition (NoMethodError)

      t.vector :embedding, limit: 1536  # OpenAI text-embedding-3-small dimension
       ^^^^^^^
/home/alain/COPbot/db/migrate/20241205000002_create_messages.rb:7:in 'block in CreateMessages#change'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:557:in 'block in ActiveRecord::Migration::Current#create_table'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/schema_statements.rb:318:in 'ActiveRecord::ConnectionAdapters::SchemaStatements#create_table'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:966:in 'block in ActiveRecord::Migration#method_missing'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:936:in 'block in ActiveRecord::Migration#say_with_time'
/home/alain/.rvm/gems/ruby-3.4.5/gems/benchmark-0.5.0/lib/benchmark.rb:305:in 'Benchmark.measure'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:936:in 'ActiveRecord::Migration#say_with_time'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:955:in 'ActiveRecord::Migration#method_missing'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:557:in 'ActiveRecord::Migration::Current#create_table'
/home/alain/COPbot/db/migrate/20241205000002_create_messages.rb:3:in 'CreateMessages#change'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:906:in 'ActiveRecord::Migration#exec_migration'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:890:in 'block (2 levels) in ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/benchmark-0.5.0/lib/benchmark.rb:305:in 'Benchmark.measure'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:889:in 'block in ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:215:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:888:in 'ActiveRecord::Migration#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1096:in 'ActiveRecord::MigrationProxy#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1410:in 'block in ActiveRecord::Migrator#execute_migration_in_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/transaction.rb:319:in 'block in ActiveRecord::ConnectionAdapters::TransactionManager#within_new_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in 'Thread.handle_interrupt'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in 'block in ActiveSupport::Concurrency::LoadInterlockAwareMonitor#synchronize'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in 'Thread.handle_interrupt'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activesupport-7.0.10/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in 'ActiveSupport::Concurrency::LoadInterlockAwareMonitor#synchronize'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/transaction.rb:317:in 'ActiveRecord::ConnectionAdapters::TransactionManager#within_new_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/database_statements.rb:316:in 'ActiveRecord::ConnectionAdapters::DatabaseStatements#transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/transactions.rb:209:in 'ActiveRecord::Transactions::ClassMethods#transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1461:in 'ActiveRecord::Migrator#ddl_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1409:in 'ActiveRecord::Migrator#execute_migration_in_transaction'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1383:in 'Array#each'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1383:in 'ActiveRecord::Migrator#migrate_without_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1332:in 'block in ActiveRecord::Migrator#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1482:in 'block in ActiveRecord::Migrator#with_advisory_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:215:in 'ActiveRecord::ConnectionAdapters::ConnectionPool#with_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1497:in 'ActiveRecord::Migrator#with_advisory_lock_connection'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1478:in 'ActiveRecord::Migrator#with_advisory_lock'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1332:in 'ActiveRecord::Migrator#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1167:in 'ActiveRecord::MigrationContext#up'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/migration.rb:1142:in 'ActiveRecord::MigrationContext#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/tasks/database_tasks.rb:262:in 'ActiveRecord::Tasks::DatabaseTasks#migrate'
/home/alain/.rvm/gems/ruby-3.4.5/gems/activerecord-7.0.10/lib/active_record/railties/databases.rake:92:in 'block (2 levels) in <main>'
/home/alain/.rvm/gems/ruby-3.4.5/gems/rake-13.3.1/exe/rake:27:in '<top (required)>'
/home/alain/.rvm/gems/ruby-3.4.5/bin/ruby_executable_hooks:22:in 'Kernel#eval'
/home/alain/.rvm/gems/ruby-3.4.5/bin/ruby_executable_hooks:22:in '<main>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace)
== 20241205000002 CreateMessages: migrating ===================================
-- create_table(:messages)
